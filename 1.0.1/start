#!/usr/bin/env bash

export HSQL_SERVER_HOST=$HSQLDB_PORT_9101_TCP_ADDR
export HSQL_SERVER_PORT=$HSQLDB_PORT_9101_TCP_PORT

export ZK_CLIENT_CONNECT=$ZOOKEEPER_PORT_2181_TCP_ADDR:$ZOOKEEPER_PORT_2181_TCP_PORT

if [ -n "$REDIS_PORT" ]; then
    export SPRING_REDIS_HOST=$REDIS_PORT_6379_TCP_ADDR
    export SPRING_REDIS_PORT=$REDIS_PORT_6379_TCP_PORT
    export XD_TRANSPORT="redis"
else
    export SPRING_RABBITMQ_ADDRESSES=$RABBITMQ_PORT_5672_TCP_ADDR:$RABBITMQ_PORT_5672_TCP_PORT
    export XD_TRANSPORT="rabbit"
fi

./xd/bin/xd-container